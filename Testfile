import { useCreateRegulatoryFile } from "utils/hooks/useCreateRegulatoryFile";

jest.mock("utils/hooks/useCreateRegulatoryFile", () => ({
  useCreateRegulatoryFile: jest.fn(),
}));

const mockCreateRegulatoryFile = jest.fn();

beforeEach(() => {
  (useCreateRegulatoryFile as jest.Mock).mockReturnValue({
    createRegulatoryFile: mockCreateRegulatoryFile,
    loading: false,
    error: null,
    data: null,
  });
});


test("should show error message if upload fails", async () => {
    (fileUpload as jest.Mock).mockRejectedValue(new Error("Upload error"));

    render(<FileSetting />);

    const input = screen.getByTestId("file-input");

    const fakeFile = new File(["hello"], "bad.pdf");

    fireEvent.change(input, {
      target: { files: [fakeFile] },
    });

    expect(await screen.findByText("File not uploaded")).toBeInTheDocument();
  })
